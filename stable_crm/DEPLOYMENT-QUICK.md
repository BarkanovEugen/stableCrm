# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π CRM –Ω–∞ VPS

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é: 100%

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä!

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS
```bash
ssh root@83.166.246.72
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
reboot
```

### 3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
ssh root@83.166.246.72
cd /root
git clone https://github.com/BarkanovEugen/stableCrm.git
cd stableCrm/stable_crm
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```bash
chmod +x setup-ssl.sh
./setup-ssl.sh
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
```bash
cp env.production .env
nano .env
# –ó–∞–º–µ–Ω–∏—Ç–µ VK_ID_CLIENT_ID –∏ VK_ID_CLIENT_SECRET –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
```

### 6. –î–µ–ø–ª–æ–π (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
```bash
chmod +x deploy.sh
./deploy.sh
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö)
```bash
chmod +x deploy-simple.sh
./deploy-simple.sh
```

## üîê VK ID –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [id.vk.com](https://id.vk.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –£–∫–∞–∂–∏—Ç–µ Redirect URI: `https://orehovyam.ru/auth/callback`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret –≤ `.env` —Ñ–∞–π–ª

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
./check-deployment-readiness.sh
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –∑–∞–≤–∏—Å–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è:
```bash
./deploy-simple.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
docker-compose -f docker-compose.prod.yml logs -f app
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
docker-compose -f docker-compose.prod.yml logs postgres
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
```bash
certbot certificates
nginx -t
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose -f docker-compose.prod.yml ps

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose -f docker-compose.prod.yml logs -f app

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
- ‚úÖ CRM –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ https://orehovyam.ru
- ‚úÖ VK ID –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `deploy-simple.sh` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è
- **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `deploy.sh` —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git pull` + `./deploy-simple.sh`

---

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è: ~15-20 –º–∏–Ω—É—Ç** ‚è±Ô∏è
